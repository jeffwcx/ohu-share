<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Share to All kinds of App</title>
  <script src="//cdn.jsdelivr.net/npm/eruda"></script>
  <script>eruda.init();</script>
</head>
<body>
  <button id="shareToQQ">ShareToQQ</button>
  <button id="shareToWeibo">ShareToWeibo</button>
  <button id="shareToQZone">ShareToQZone</button>
  <button id="shareToWeixin">shareToWechat</button>
  <button id="shareToMoments">shareToMoments</button>
  <a href="mqqapi://share/to_qzone?src_type=isqqBrowser&version=1&file_type=news&req_type=1&share_id=924053302&url=aHR0cHM6Ly9naXRodWIuY29tL2plZmZ3Y3g=&title=566A5Y2V5L6L5a2Q&description=566A5Y2V55qE5pGY6KaB5ZKM5o+P6L+w&previewimageUrl=aHR0cHM6Ly9hdmF0YXJzMS5naXRodWJ1c2VyY29udGVudC5jb20vdS8xNDA3Mzc3NT9zPTQ2MCZ2PTQ=&image_url=aHR0cHM6Ly9hdmF0YXJzMS5naXRodWJ1c2VyY29udGVudC5jb20vdS8xNDA3Mzc3NT9zPTQ2MCZ2PTQ=">
    schema test
  </a>
  <button id="openApp">openApp</button>
  <input id="scheme" type="text" />
  <script src="../dist/ohu-share.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var scheme = document.getElementById('scheme')
      function openByScheme (url) {
        window.location.href = url
        // var iframe = document.createElement('iframe')
        // iframe.style.visibility = 'hidden'
        // document.body.appendChild(iframe)
        // setTimeout(() => {
        //   iframe && iframe.parentNode && iframe.parentNode.removeChild(iframe)
        // }, 2000)
      }
      document.getElementById('openApp').addEventListener('click', function() {
        openByScheme(scheme.value)
      })
      var share = new ohu.Share({
        title: '简单例子',
        desc: '简单的摘要和描述',
        icon: 'https://avatars1.githubusercontent.com/u/14073775?s=460&v=4',
        link: 'https://github.com/jeffwcx',
        from: 'github',
        wechat: {
          appId: '',
          timestamp: '',
          nonceStr: '',
          signature: ''
        }
      })
      console.log(share.context)
      var Apps = ohu.Apps
      document.getElementById('shareToWeibo').addEventListener('click', function() {
        share.to(Apps.WEIBO)
        .then(function (isSupport) {
          if (!isSupport) {
            console.log('无法支持微博')
          }
        }).catch((err) => {
          console.log(err)
        })
      }, false)
      document.getElementById('shareToQQ').addEventListener('click', function() {
        share.to(Apps.QQ)
        .then(function (isSupport) {
          if (!isSupport) {
            console.log('无法支持QQ')
          }
        }).catch((err) => {
          console.log(err)
        })
      }, false)
      document.getElementById('shareToQZone').addEventListener('click', function() {
        share.to(Apps.QZONE)
        .then(function (isSupport) {
          if (!isSupport) {
            console.log('无法支持Qzone')
          }
        }).catch((err) => {
          console.log(err)
        })
      }, false)
      document.getElementById('shareToWeixin').addEventListener('click', function() {
        share.to(Apps.WECHAT)
        .then(function (isSupport) {
          if (!isSupport) {
            console.log('无法支持Wechat')
          }
        }).catch((err) => {
          console.log(err)
        })
      }, false)
      document.getElementById('shareToMoments').addEventListener('click', function() {
        share.to(Apps.MOMENTS).then(function (isSupport) {
          if (!isSupport) {
            console.log('无法支持wechat moments')
          }
        }).catch((err) => {
          console.log(err)
        })
      }, false)
    })

    
  </script>
</body>
</html>
